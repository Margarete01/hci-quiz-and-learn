<header>
  <h1>Interactive Quiz App</h1>
</header>

<!-- Start Quiz Button -->
<div *ngIf="!started" class="start-container">
  <button (click)="startQuiz()">Start Quiz</button>
</div>

<!-- Quiz Content -->
<div *ngIf="started">
  <div class="quiz-container">
    <div class="progress-bar">
      <div
        class="progress-bar-inner"
        [style.width]="(questionIndex / totalQuestions) * 100 + '%'"
      ></div>
    </div>

    <div class="question-text">{{ currentQuestion }}</div>

    <input
      type="text"
      [(ngModel)]="userAnswer"
      placeholder="Type your answer here"
    />

    <div>
      <button (click)="submitAnswer()">Submit</button>
      <button (click)="startSpeechRecognition()">Speak Answer</button>
    </div>

    <!-- Floating Action Button -->
    <div class="floating-action-btn" (mouseenter)="showTooltip = true" (mouseleave)="showTooltip = false">
      <button (click)="triggerTTS()" class="replay-btn">
        <i class="material-icons">replay</i>
      </button>
      <span class="tooltip" *ngIf="showTooltip">Replay Question</span>
    </div>

    <!-- Speech Indicator -->
    <div class="speech-indicator" *ngIf="isSpeaking">
      <div class="pulse"></div>
      <p>Listening...</p>
    </div>
    
    <!-- Popup Modal for Loading Spinner and Feedback -->
    <div class="popup" *ngIf="loading || feedback">
      <div class="popup-content">
        <div *ngIf="loading" class="spinner">
          <div class="spinner-circle"></div>
          <p>Submitting your answer...</p>
        </div>
        <div *ngIf="!loading && feedback" class="feedback">
          <p>{{ feedback }}</p>
          <button (click)="closePopup()">OK</button>
        </div>
      </div>
    </div>
  </div>
</div>